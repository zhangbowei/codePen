<!DOCTYPE html>
<html style="height: 100px; overflow: auto; margin-top: 100px;" lang="en">

<head>
    <meta charset="UTF-8">
    <style>
        #container {
            margin-top: 100px;
        }
        </style>
</head>

<body style="height: 5000px" id="wrapper">
    <div style=" width: 300px; height: 100px; background:#000;" id="box1"></div>
    <div style=" width: 300px; height: 100px; background:red;" id="box2"></div>

    <script>
        !function () {
            var EventUtil = {
                addHandler: function (element, type, handler) {
                    if (element.addEventListener) {
                        element.addEventListener(type, handler, false);
                    } else if (element.attachEvent) {
                        element.attachEvent('on' + type, handler);
                    } else {
                        element['on' + type] = handler;
                    }
                },
                getEvent: function (event) {
                    return event ? event : window.event;
                },
                stopPropagation: function (event) {
                    event = event || window.event;
                    if (event.stopPropagation) {
                        event.stopPropagation();
                    } else {
                        event.cancelBubble = true;
                    }
                }
            };
            function throttle(callbackFn, delay) {
                var start = Date.now();
                return function() {
                    var args = arguments;
                    var now = Date.now();
                    var self = this;
                    if (now - start > delay) {
                        start = now;
                        setTimeout(function()  {
                            callbackFn.apply(self, args);
                        });
                    }
                };
            }

            const boxA = document.querySelector('#box1');
            const boxB = document.querySelector('#box2');
            const body = document.body;
            const handleMouseWheel = throttle(function (event) {
                EventUtil.stopPropagation(event);
                event = EventUtil.getEvent(event);
                // var value = event.wheelDelta || -event.detail;
                // var delta = Math.max(-1, Math.min(1, value));
                // console.log(delta < 0 ? 'down' : 'up');
                var start = false;
                if (!start) {
                    start = true;
                    requestAnimationFrame(function (timeStamp) {
                        boxA.style.position = 'relative';
                        boxB.style.position = 'relative';
                        boxA.style.top = body.scrollTop*2 + 'px';
                        boxB.style.top = body.scrollTop*3 + 'px';
                        start = false;
                    });
                }
            }, 10);

            EventUtil.addHandler(document, 'mousewheel', handleMouseWheel);
            EventUtil.addHandler(document, 'DOMMouseScroll', handleMouseWheel);

        }();
    </script>
</body>

</html>